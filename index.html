<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Scrollytelling templates for Multimedia</title>
    <meta name="description" content="Scrollytelling templates for Multimedia" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
      
  </head>

  <body>
        <h1 class="intro__hed">Scrollytelling templates</h1>
        <h2 class="intro__dek">
         Adapted for Multimedia
        </h2>
    <p>
This is a basic intro to multimedia scrollytelling using media from environmental activist Mina Guli's #runblue campaign to demonstrate scrollytelling techniques for use by Javascript novices.
    </p>
    <figure>
          <img
              src="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/mina_running.jpeg?v=1659890139451" 
              width="100%"
            />
            <figcaption id="captionObj">Example 1 - Scrolling with basic flexbox. </figcaption>
        </figure>

        <article>
          
          <div class="step"
               data-step="1"
            style="height: 504px"
            data-scrollama-index="0"
                data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/mina_running.jpeg?v=1659890139451"
            data-text="Mina Guli is running 200 marathons to draw attention to the world water crisis. "
            data-attribute="src"
            data-target="imgObj"
               ><p>
        Environmental activist Mina Guli set out to run 200 marathons in 2022 to raise awareness of the global water crisis.
        </p></div>
          <div class="step"
                    data-step="2"
            style="height: 504px"
            data-scrollama-index="1"
                                              data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/ship_graveyard.png?v=1659377819289"
            data-text="Ship Graveyard, Muynak, Uzbekistan,
Uzbekistan"
            data-attribute="src"
            data-target="imgObj"
               ><p>For Marathon 28, Mina ran across the dried bed of the Aral Sea.</p></div>
      <div class="step"
                data-step="3"
            style="height: 504px"
            data-scrollama-index="4"
                data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/ship_graveyard.png?v=1659377819289"
            data-text="Ship Graveyard, Muynak, Uzbekistan,
Uzbekistan"
            data-attribute="src"
            data-target="imgObj"
           ><p>
         Formerly the world's fourth largest lake, the Aral Sea dried up when the region's rivers were diverted for cotton farming.  Fishing boats and the people who relied on them were left stranded as the water dried up.</p></div>

     <div class="step"
               data-step="4"
            style="height: 504px"
            data-scrollama-index="5"
           data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/old_man_aral_sea.jpg?v=1659343046114"
            data-text="Ali Shaddinov - Fisherman, Muynak,Uzbekistan"
            data-attribute="src"
            data-target="imgObj"
          >
<p>
  “First the sea left the people, then the people left the sea.”
       </p></div><div class="step"
                           data-step="5"
            style="height: 504px"
            data-scrollama-index="6">
          <p>Ali Shaddinov was born in 1951 and he has lived at the Aral Sea in Muynak since he was 3 years old. His parents were fishermen and he worked as a fisherman before the Aral Sea receded.</p></div> <div class="step"
     data-step="6"
            style="height: 504px"
            data-scrollama-index="7"
                     data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/old_man_aral_sea.jpg?v=1659343046114"
            data-text="Ali Shaddinov - Fisherman, Muynak,Uzbekistan"
            data-attribute="src"
            data-target="imgObj">
<p>The last time Ali caught a fish was in 1977.</p></div>
          
          <div
            class="step"
            data-step="7"
            style="height: 504px"
            data-scrollama-index="8"
                               data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/ship_graveyard.png?v=1659377819289"
            data-text="Ship Graveyard, Muynak, Uzbekistan,
Uzbekistan"
            data-attribute="src"
            data-target="imgObj"
          >
            <p>
             At its peak in 1957, the Aral Sea produced almost 50,000 tons of
                fish. The receding water level and rising salinity of the sea
                meant that by the 1980s, few of the 20 native fish species were
                left.
            </p>
          </div>
          <div
            class="step"
            data-step="8"
            style="height: 504px"
            data-scrollama-index="9"
                             data-value="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/aerial_aral.jpg?v=1659384031109"
            data-text="Aerial view - Rotting ships in the dried-up Aral Sea,
Uzbekistan"
            data-attribute="src"
            data-target="imgObj"
          >
            <p>
              In its heyday Muynak was one of the largest fishing cities in Central Asia, the clear water was full of fish and the beaches were a bustling tourist destination. 
            </p>
          </div>
          <div
            class="step"
            data-step="9"
            style="height: 504px"
            data-scrollama-index="10"
             
          >
            <p>By 1987, no fish could be caught commercially.</p>
          </div>
                    <div
            class="step"
            data-step="10"
            style="height: 504px"
            data-scrollama-index="11"
          >
            <p>Now the main attraction of Muynak city is the ship graveyard and, due to climate change, the city has turned into a desert. </p>
          </div>
          <div
            class="step"
            data-step="11"
            style="height: 504px"
            data-scrollama-index="12"
          >
<p>The local economy has evaporated along with the water.</p></div>


        </article>
      </section>

      <section id="outro"> 
      <div class ="outro__hed"
            style="height: 304px"
         > <p>
        Next: We follow Mina on the African leg of her journey.
          </p>
      </div>
         <div class ="outro__dek"
            style="height: 304px"
         >
        <p>
        Credits: Thirst Foundation
          </p></div>
     
        
        

    </section>
    </main>
      
    

    <script src="d3.min.js"></script>
    <script src="scrollama.min.js"></script>
    <script>
      // using d3 for convenience
      var main = d3.select("main");
      var scrolly = main.selectAll(".scrolly");
      var figure = scrolly.selectAll("figure");
      var article = scrolly.selectAll("article");
      var step = article.selectAll(".step");
      const caption = document.getElementById("captionObj");

      // initialize the scrollama
      var scroller = scrollama();

      // generic window resize listener event
      function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step.style("height", stepH + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure
          .style("height", figureHeight + "px")
          .style("top", figureMarginTop + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
      }

      // scrollama event handlers
      function handleStepEnter(response) {
        console.log(response);
        // response = { element, direction, index }

        // add color to current step only
        step.classed("is-active", function (d, i) {
          return i === response.index;
      
        });

        // update graphic based on step
        figure.select("p").text(response.index + 1);
      document
          .getElementById(response.element.dataset.target)
          .setAttribute(
            response.element.dataset.attribute,
            response.element.dataset.value
          );
         // update caption for images based on step
        if (response.element.dataset.target == "imgObj") {
          let alt = response.element.dataset.text;
          if (alt) {
            caption.innerText = alt;
          }
        }
      
      }

      function init() {
        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
          .setup({
            step: ".step",
            offset: 0.33,
            debug: true,
          })
          .onStepEnter(handleStepEnter);
      }

      // kick things off
      init();
    </script>
  </body>
</html>
