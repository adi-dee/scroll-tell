<!DOCTYPE html>
<!-- saved from url=(0061)https://russellgoldenberg.github.io/scrollama/sticky-overlay/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Scrollama: Sticky Overlay Example</title>
	<meta name="description" content="Scrollama: Sticky Overlay Example">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="style.css">
	<style>
		#scrolly {
			position: relative;
			background-color: #f3f3f3;
			padding: 1rem;
		}

		article {
			position: relative;
			padding: 0;
			max-width: 20rem;
			margin: 0 auto;
		}

		figure {
			position: -webkit-sticky;
			position: sticky;
			left: 0;
			width: 100%;
			margin: 0;
			-webkit-transform: translate3d(0, 0, 0);
			-moz-transform: translate3d(0, 0, 0);
			transform: translate3d(0, 0, 0);
			background-color: #8a8a8a;
			z-index: 0;
		}

		figure p {
			text-align: center;
			padding: 1rem;
			position: absolute;
			top: 50%;
			left: 50%;
			-moz-transform: translate(-50%, -50%);
			-webkit-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			font-size: 8rem;
			font-weight: 900;
			color: #fff;
		}

		.step {
			margin: 0 auto 2rem auto;
			color: #fff;
			background-color: rgba(0, 0, 0, 0.1);
		}

		.step:last-child {
			margin-bottom: 0;
		}

		.step.is-active p {
			background-color: goldenrod;
			color: #3b3b3b;
		}

		.step p {
			text-align: center;
			padding: 1rem;
			font-size: 1rem;
			background-color: #3b3b3b;
		}
    
    #background-video {
  width: 100vw;
  object-fit: cover;
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
}

	</style>
</head>

<body>
	<main>
		<section id="intro">
      <video
          id="background-video"
          autoplay
          loop
          muted
          poster="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/okavango.png?v=1659356636360"
        >
          <source
            src="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/okavango.mp4?v=1659353211765"
            type="video/mp4"
          />
        </video>

        <h1 class="intro__hed">No Life Without Water</h1>
        <p class="intro__dek">“First the sea left the people, then the people left the sea.”</p>
		</section>

		<section id="scrolly">
			<figure style="height: 336.5px; top: 168.25px;"><div class="frame">
           
          <p>0</p>
          <!--   actual graphic/chart   -->
          <img
            src="https://cdn.glitch.global/63423c5f-5098-4a28-8b25-50cda668df62/ship_graveyard.png?v=1659377819289"
            width="100%"
          />
        <figcaption>Photographer: Jared Paisley</figcaption></div></figure>
      

			<article>
				<div class="step" data-step="1" style="height: 504px;" data-scrollama-index="0">
					<p>“First the sea left the people, then the people left the sea.”</p>
				</div>
				<div class="step" data-step="2" style="height: 504px;" data-scrollama-index="1">
					<p>Ali was born in 1951 and he has lived in Muynak since he was 3 years old. His parents were fishermen and he worked as a fisherman before the Aral Sea receded. The last time he caught a fish was in 1977.</p>
				</div>
				<div class="step" data-step="3" style="height: 504px;" data-scrollama-index="2">
					<p>At its peak in 1957, the Aral Sea produced almost 50,000 tons of fish. The receding water level and rising salinity of the sea meant that by the 1980s, few of the 20 native fish species were left.</p>
				</div>
				<div class="step is-active" data-step="4" style="height: 504px;" data-scrollama-index="3">
					<p>By 1987, no fish could be caught commercially.</p>
				</div>
			</article>
		</section>

		<section id="outro"></section>
	</main>

	<script src="d3.min.js"></script>
	<script src="scrollama.min.js"></script>
	<script>
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {
			console.log(response);
			// response = { element, direction, index }

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// update graphic based on step
			figure.select("p").text(response.index + 1);
		}


		function init() {

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();
	</script>


</body></html>